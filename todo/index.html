<!DOCTYPE html>
<html>
<head>
	<title>To Do: Home</title>
	<link rel="stylesheet" href="main.css">

</head>
<body>
	<div id="body-wrapper">
		<div id="nav-wrapper">
			<div><a></a></div>
			<div><a class="current">Home</a></div>
			<div><a class="link">Work</a></div>
			<div><a class="link">School</a></div>
			<div><a class="link">Family</a></div>
			<div><a class="link">Friends</a></div>
			<div><a></a></div>
		</div>
		<div id="add-content-wrapper">
			<h1>Create new item:</h1>
			<div id="add-wrapper">
				<div id="add-todo">
					<p>What do you need to do?</p>
					<textarea class="input-add" id="taskname"></textarea>
					<p>When do you need to do it by?</p>
					<input class="input-add" type="date" id="date" value="2018-10-16" min="2018-10-01" max="2018=12-31">
					<p>Add any additional information here:</p>
					<textarea id="add-info"></textarea>
					<button id="add-new" onclick="addNew()">Add new task</button>
					<p id="invisitext">dummy</p>
				</div>
			</div>
		</div>
		<div id="todo-content-wrapper">
			<h1>To do:</h1>
			<div id="todo-wrapper">
				<div class="dummy-todo" id="0">
					<table class="todo-table">
						<tr>
							<td class="todo-td"><p>Fix kitchen sink</p></td>
							<td class="todo-td"><p>10-19-2018</p></td>
							<td class="todo-td"><p>insert text here about the thing you're doing</p></td>
							<td class="todo-td"><span id="delete" style="cursor:pointer">&times;</span></td>
						</tr>
					</table>
				</div>
			</div>
		</div>
		<div id="myModal" class="modal">

			<div class="modal-content">
				<h1>Are you sure?</h1>
				<p>Once you delete this item, it can't be recovered.</p>
				<button id="yes" onclick="onclickyes()">Yes</button>
				<button id="no" onclick="onclickno()">No</button>
			</div>

		</div>
	</div>

<script>

	var modal = document.getElementById('myModal');
	var close = document.getElementById("delete");
	var no = document.getElementById("no")[0];
	var invisitext = document.getElementById("invisitext");
	var parent;
	var p;

	var name;
	var date;
	var text;
	// When the user clicks on the button, open the modal 
	close.onclick = function(e) {
		parent = e.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.id;
		//there is a very good reason for the six parentNode selectors:
		//i'm trying to get the id from the div element that wraps the entire todo structure
		//but i'm doing that from clicking on the span element
		//so i need to go back six elements (including the not seen tbody)
		//to get that id
		//because fuck me i guess
		console.log(typeof(parent));
	    modal.style.display = "block";
		invisitext.innerHTML = parent;
	}
	// When the user clicks on <span> (x), close the modal
	function onclickno() {
	    modal.style.display = "none";
	}
	//this is honestly so back asswards but uhhh it works? so heck yeah
	function onclickyes(e) {
		modal.style.display = "none";
		parent = invisitext.innerHTML;
		p = parent;
		console.log(p);
		document.getElementById(p).style.display = "none";
		p.style.display = "none";
	}
	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
	    if (event.target == modal) {
	        modal.style.display = "none";
	    }
	}

	function addNew(){
		name = document.getElementById("taskname");
		date = document.getElementById("date");
		text = document.getElementById("add-info");

		console.log(name.value + ", " + date.value + ", " + text.value);
	}


</script>


</body>
</html>